{% extends 'base.html' %} {% block title %}My Reports{% endblock %} {% block
content %}
<div class="d-flex justify-content-between align-items-center mb-4">
  <h2><i class="bi bi-megaphone me-2"></i>My Lost & Found Reports</h2>
  <a href="{% url 'lostfound:report_item' %}" class="btn btn-warning">
    <i class="bi bi-plus-circle"></i> New Report
  </a>
</div>

<!-- Filter Tabs -->
<div class="card mb-4">
  <div class="card-body">
    <div class="d-flex justify-content-center">
      <div class="btn-group" role="group">
        <a
          href="{% url 'lostfound:my_reports' %}"
          class="btn btn-outline-warning {% if not status_filter %}active{% endif %}"
        >
          All Reports
        </a>
        <a
          href="{% url 'lostfound:my_reports' %}?status=lost"
          class="btn btn-outline-danger {% if status_filter == 'lost' %}active{% endif %}"
        >
          Lost Items
        </a>
        <a
          href="{% url 'lostfound:my_reports' %}?status=found"
          class="btn btn-outline-success {% if status_filter == 'found' %}active{% endif %}"
        >
          Found Items
        </a>
        <a
          href="{% url 'lostfound:my_reports' %}?status=returned"
          class="btn btn-outline-info {% if status_filter == 'returned' %}active{% endif %}"
        >
          Returned Items
        </a>
      </div>
    </div>
  </div>
</div>

<!-- Reports List -->
<div class="row">
  {% for item in items %}
  <div class="col-md-6 mb-4">
    <div class="card h-100">
      <div class="card-body">
        <div class="d-flex justify-content-between align-items-start mb-2">
          <h5 class="card-title">{{ item.item_name }}</h5>
          <span
            class="badge bg-{% if item.status == 'lost' %}danger{% elif item.status == 'found' %}success{% else %}info{% endif %}"
          >
            {{ item.get_status_display }}
          </span>
        </div>

        <p class="card-text small text-muted">
          {{ item.description|truncatechars:150 }}
        </p>

        <div class="row small text-muted mb-3">
          <div class="col-6">
            <i class="bi bi-tag"></i> {{ item.get_item_type_display }}
          </div>
          <div class="col-6">
            <i class="bi bi-calendar"></i> {{ item.date_lost|date:"M d, Y" }}
          </div>
        </div>

        <div class="d-flex justify-content-between align-items-center">
          <a
            href="{% url 'lostfound:item_detail' item.pk %}"
            class="btn btn-sm btn-outline-warning"
            >View Details</a
          >
          <div class="btn-group" role="group">
            <a
              href="{% url 'lostfound:update_item' item.pk %}"
              class="btn btn-sm btn-outline-primary"
            >
              <i class="bi bi-pencil"></i> Edit
            </a>
            <a
              href="{% url 'lostfound:delete_item' item.pk %}"
              class="btn btn-sm btn-outline-danger"
            >
              <i class="bi bi-trash"></i>
            </a>
          </div>
        </div>
      </div>
      <div class="card-footer text-muted small">
        Reported {{ item.created_at|timesince }} ago
      </div>
    </div>
  </div>
  {% empty %}
  <div class="col-12">
    <div class="card">
      <div class="card-body text-center py-5">
        <i class="bi bi-inbox display-4 text-muted mb-3"></i>
        <h5>No Reports Yet</h5>
        <p class="text-muted">
          You haven't reported any lost or found items yet.
        </p>
        <a href="{% url 'lostfound:report_item' %}" class="btn btn-warning"
          >Report Your First Item</a
        >
      </div>
    </div>
  </div>
  {% endfor %}
</div>

<!-- Stats Summary -->
{% if items %}
<div class="card mt-4">
  <div class="card-body">
    <h5>Reports Summary</h5>
    <div class="row text-center">
      <div class="col-md-3">
        <div class="display-6 text-danger">{{ items|length }}</div>
        <small>Total Reports</small>
      </div>
      <div class="col-md-3">
        <div class="display-6 text-danger">{{ items|length|default:0 }}</div>
        <small>Lost Items</small>
      </div>
      <div class="col-md-3">
        <div class="display-6 text-success">{{ items|length|default:0 }}</div>
        <small>Found Items</small>
      </div>
      <div class="col-md-3">
        <div class="display-6 text-info">{{ items|length|default:0 }}</div>
        <small>Returned Items</small>
      </div>
    </div>
  </div>
</div>
{% endif %} {% endblock %}
