{% extends 'base.html' %}

{% block title %}Welcome to Campus Marketplace{% endblock %}

{% block content %}
<!-- Hero Section - Visible to All -->
<div class="hero-section text-center py-5 bg-primary text-white rounded mb-5">
    <h1 class="display-4 mb-4">Welcome to Campus Marketplace</h1>
    <p class="lead mb-4">Your exclusive campus community platform for buying, selling, finding, and connecting</p>
    
    {% if not user.is_authenticated %}
    <div class="mb-4">
        <a href="{% url 'accounts:register' %}" class="btn btn-light btn-lg me-2">
            <i class="bi bi-person-plus"></i> Join Campus Community
        </a>
        <a href="{% url 'accounts:login' %}" class="btn btn-outline-light btn-lg">
            <i class="bi bi-box-arrow-in-right"></i> Student Login
        </a>
    </div>
    {% else %}
    <p class="h4">Welcome back, {{ user.username }}! Ready to explore campus?</p>
    {% endif %}
</div>

{% if not user.is_authenticated %}
<!-- Show to Non-Logged Users -->
<div class="row">
    <div class="col-md-12 mb-5">
        <div class="card">
            <div class="card-header bg-success text-white">
                <h4><i class="bi bi-shield-check"></i> Campus-Exclusive Platform</h4>
            </div>
            <div class="card-body">
                <p class="lead">This platform is exclusively for verified campus students and staff. Please register or login to access all features.</p>
                
                <div class="row mt-4">
                    <div class="col-md-6">
                        <h5>Why Register?</h5>
                        <ul class="list-group list-group-flush">
                            <li class="list-group-item"><i class="bi bi-check-circle-fill text-success"></i> Buy & sell with trusted campus members</li>
                            <li class="list-group-item"><i class="bi bi-check-circle-fill text-success"></i> Report lost items to campus community</li>
                            <li class="list-group-item"><i class="bi bi-check-circle-fill text-success"></i> Find verified housing near campus</li>
                            <li class="list-group-item"><i class="bi bi-check-circle-fill text-success"></i> Access student-only restaurant deals</li>
                            <li class="list-group-item"><i class="bi bi-check-circle-fill text-success"></i> Secure campus-only environment</li>
                        </ul>
                    </div>
                    <div class="col-md-6">
                        <h5>How to Get Started</h5>
                        <div class="steps">
                            <div class="step mb-3">
                                <span class="badge bg-primary rounded-circle p-2">1</span>
                                <strong>Register</strong> with your campus email
                            </div>
                            <div class="step mb-3">
                                <span class="badge bg-primary rounded-circle p-2">2</span>
                                <strong>Verify</strong> your student status
                            </div>
                            <div class="step mb-3">
                                <span class="badge bg-primary rounded-circle p-2">3</span>
                                <strong>Access</strong> all campus marketplace features
                            </div>
                        </div>
                        
                        <div class="alert alert-info mt-4">
                            <i class="bi bi-info-circle"></i>
                            <strong>Note:</strong> All features require campus verification for security.
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Preview of Features (Images/Descriptions only) -->
<div class="row">
    <div class="col-12">
        <h3 class="mb-4">What's Inside Campus Marketplace?</h3>
    </div>
    <div class="col-md-3 mb-4">
        <div class="card text-center">
            <div class="card-body">
                <i class="bi bi-cart display-4 text-muted mb-3"></i>
                <h5 class="card-title">Student Marketplace</h5>
                <p class="card-text small">Buy and sell textbooks, electronics, furniture, and more with fellow students.</p>
            </div>
        </div>
    </div>
    <div class="col-md-3 mb-4">
        <div class="card text-center">
            <div class="card-body">
                <i class="bi bi-search display-4 text-muted mb-3"></i>
                <h5 class="card-title">Lost & Found</h5>
                <p class="card-text small">Report lost items or help return found items within the campus community.</p>
            </div>
        </div>
    </div>
    <div class="col-md-3 mb-4">
        <div class="card text-center">
            <div class="card-body">
                <i class="bi bi-house display-4 text-muted mb-3"></i>
                <h5 class="card-title">Campus Housing</h5>
                <p class="card-text small">Find verified apartments, rooms, and hostels near campus.</p>
            </div>
        </div>
    </div>
    <div class="col-md-3 mb-4">
        <div class="card text-center">
            <div class="card-body">
                <i class="bi bi-egg-fried display-4 text-muted mb-3"></i>
                <h5 class="card-title">Campus Food</h5>
                <p class="card-text small">Discover restaurants with student discounts and campus delivery.</p>
            </div>
        </div>
    </div>
</div>

{% else %}
<!-- SHOW ONLY TO LOGGED-IN USERS -->

<!-- Quick Stats -->
<div class="row mb-5">
    <div class="col-md-12">
        <div class="card">
            <div class="card-body">
                <h4 class="card-title mb-4">Quick Access</h4>
                <div class="row">
                    <div class="col-md-3 text-center mb-3">
                        <a href="{% url 'marketplace:home' %}" class="btn btn-primary btn-lg w-100">
                            <i class="bi bi-cart h1 d-block mb-2"></i>
                            Marketplace
                        </a>
                    </div>
                    <div class="col-md-3 text-center mb-3">
                        <a href="{% url 'lostfound:home' %}" class="btn btn-warning btn-lg w-100">
                            <i class="bi bi-search h1 d-block mb-2"></i>
                            Lost & Found
                        </a>
                    </div>
                    <div class="col-md-3 text-center mb-3">
                        <a href="{% url 'housing:home' %}" class="btn btn-success btn-lg w-100">
                            <i class="bi bi-house h1 d-block mb-2"></i>
                            Housing
                        </a>
                    </div>
                    <div class="col-md-3 text-center mb-3">
                        <a href="{% url 'food:home' %}" class="btn btn-danger btn-lg w-100">
                            <i class="bi bi-egg-fried h1 d-block mb-2"></i>
                            Food
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Recent Activity Section -->
<div class="row">
    <div class="col-md-8">
        <div class="card mb-4">
            <div class="card-header">
                <h5 class="mb-0">Recent Campus Activity</h5>
            </div>
            <div class="card-body">
                <!-- Marketplace Items -->
                <div class="mb-4">
                    <h6><i class="bi bi-cart text-primary"></i> New in Marketplace</h6>
                    <div class="row">
                        <!-- You can add actual recent items here -->
                        <div class="col-md-4 mb-3">
                            <div class="card">
                                <div class="card-body">
                                    <p class="card-text">Calculus Textbook</p>
                                    <small class="text-muted">KSh 1,500</small>
                                </div>
                            </div>
                        </div>
                        <!-- Add more items dynamically -->
                    </div>
                </div>
                
                <!-- Quick Actions -->
                <div class="row">
                    <div class="col-md-6">
                        <div class="card">
                            <div class="card-body">
                                <h6>Need to sell something?</h6>
                                <a href="{% url 'marketplace:create_product' %}" class="btn btn-outline-primary btn-sm">Sell Item</a>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="card">
                            <div class="card-body">
                                <h6>Lost an item?</h6>
                                <a href="{% url 'lostfound:report_item' %}" class="btn btn-outline-warning btn-sm">Report Now</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="col-md-4">
        <div class="card">
            <div class="card-header">
                <h5 class="mb-0">Your Dashboard</h5>
            </div>
            <div class="card-body">
                <div class="list-group">
                    <a href="{% url 'marketplace:my_products' %}" class="list-group-item list-group-item-action">
                        <i class="bi bi-bag me-2"></i> My Products
                        <span class="badge bg-primary float-end">0</span>
                    </a>
                    <a href="{% url 'lostfound:my_reports' %}" class="list-group-item list-group-item-action">
                        <i class="bi bi-megaphone me-2"></i> My Reports
                        <span class="badge bg-warning float-end">0</span>
                    </a>
                    <a href="{% url 'housing:my_properties' %}" class="list-group-item list-group-item-action">
                        <i class="bi bi-house-door me-2"></i> My Properties
                        <span class="badge bg-success float-end">0</span>
                    </a>
                    <a href="{% url 'food:my_restaurants' %}" class="list-group-item list-group-item-action">
                        <i class="bi bi-shop me-2"></i> My Restaurants
                        <span class="badge bg-danger float-end">0</span>
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>
{% endif %}
{% endblock %}