{% extends 'base.html' %}
{% load static %}

{% block title %}Campus Marketplace - Connect, Trade, Find{% endblock %}

{% block content %}
{% if user.is_authenticated %}
<!-- Content for LOGGED IN users -->
<div class="row align-items-center">
    <div class="col-md-6">
        <h1 class="display-4 fw-bold mb-4">
            Welcome back, <span class="text-primary">{{ user.username }}</span>!
        </h1>
        <p class="lead mb-4">
            Ready to continue your campus journey? Check out what's new!
        </p>
        <div class="d-grid gap-2 d-md-flex">
            <a href="{% url 'lostfound:index' %}" class="btn btn-primary btn-lg px-4">
                <i class="bi bi-binoculars"></i> Lost & Found
            </a>
            <a href="{% url 'accounts:profile' %}" class="btn btn-outline-primary btn-lg px-4">
                <i class="bi bi-person"></i> My Profile
            </a>
        </div>
    </div>
    <div class="col-md-6">
        <img src="{% static 'images/hero.svg' %}" alt="Campus Life" class="img-fluid">
    </div>
</div>
{% else %}
<!-- Content for GUESTS / NOT LOGGED IN -->
<div class="row align-items-center">
    <div class="col-md-6">
        <h1 class="display-4 fw-bold mb-4">
            Your <span class="text-primary">Campus</span><br>
            <span class="text-secondary">Marketplace</span>
        </h1>
        <p class="lead mb-4">
            Join thousands of students buying, selling, finding lost items, 
            discovering housing, and getting amazing food deals - all in one place!
        </p>
        <div class="d-grid gap-2 d-md-flex">
            <a href="{% url 'accounts:register' %}" class="btn btn-primary btn-lg px-4">
                <i class="bi bi-person-plus"></i> Join Now - It's Free!
            </a>
            <a href="{% url 'accounts:login' %}" class="btn btn-outline-primary btn-lg px-4">
                <i class="bi bi-box-arrow-in-right"></i> Login
            </a>
        </div>
        
        <div class="mt-5">
            <h5>Why Join Campus Marketplace?</h5>
            <ul class="list-unstyled">
                <li class="mb-2"><i class="bi bi-check-circle-fill text-success"></i> Secure campus-only community</li>
                <li class="mb-2"><i class="bi bi-check-circle-fill text-success"></i> Find lost items & return them</li>
                <li class="mb-2"><i class="bi bi-check-circle-fill text-success"></i> Buy & sell at student-friendly prices</li>
                <li class="mb-2"><i class="bi bi-check-circle-fill text-success"></i> Discover housing near campus</li>
                <li class="mb-2"><i class="bi bi-check-circle-fill text-success"></i> Get exclusive food deals</li>
            </ul>
        </div>
    </div>
    <div class="col-md-6">
        <img src="{% static 'images/campus_community.svg' %}" alt="Campus Community" class="img-fluid">
    </div>
</div>

<!-- Features Preview for Guests -->
<div class="row mt-5 pt-5">
    <div class="col-12 text-center mb-4">
        <h2>Everything You Need, In One Place</h2>
        <p class="lead">Get a sneak peek of what awaits after you join!</p>
    </div>
    
    <div class="col-md-3">
        <div class="card h-100 border-0 shadow-sm">
            <div class="card-body text-center">
                <div class="bg-primary bg-opacity-10 text-primary rounded-circle d-inline-flex align-items-center justify-content-center mb-3" style="width: 80px; height: 80px;">
                    <i class="bi bi-cart fs-3"></i>
                </div>
                <h5>Marketplace</h5>
                <p>Buy textbooks, electronics, and more from fellow students at great prices.</p>
            </div>
        </div>
    </div>
    
    <div class="col-md-3">
        <div class="card h-100 border-0 shadow-sm">
            <div class="card-body text-center">
                <div class="bg-success bg-opacity-10 text-success rounded-circle d-inline-flex align-items-center justify-content-center mb-3" style="width: 80px; height: 80px;">
                    <i class="bi bi-binoculars fs-3"></i>
                </div>
                <h5>Lost & Found</h5>
                <p>Lost your keys? Found a phone? Reunite items with their owners.</p>
            </div>
        </div>
    </div>
    
    <div class="col-md-3">
        <div class="card h-100 border-0 shadow-sm">
            <div class="card-body text-center">
                <div class="bg-warning bg-opacity-10 text-warning rounded-circle d-inline-flex align-items-center justify-content-center mb-3" style="width: 80px; height: 80px;">
                    <i class="bi bi-house fs-3"></i>
                </div>
                <h5>Housing</h5>
                <p>Find rooms, apartments, and houses near campus. Verified listings only.</p>
            </div>
        </div>
    </div>
    
    <div class="col-md-3">
        <div class="card h-100 border-0 shadow-sm">
            <div class="card-body text-center">
                <div class="bg-danger bg-opacity-10 text-danger rounded-circle d-inline-flex align-items-center justify-content-center mb-3" style="width: 80px; height: 80px;">
                    <i class="bi bi-egg-fried fs-3"></i>
                </div>
                <h5>Food Deals</h5>
                <p>Special offers and discounts from campus restaurants. Save on meals!</p>
            </div>
        </div>
    </div>
</div>

<!-- Call to Action -->
<div class="row mt-5">
    <div class="col-md-8 mx-auto text-center">
        <div class="card bg-primary text-white">
            <div class="card-body py-5">
                <h2 class="display-6 mb-3">Ready to Join Our Community?</h2>
                <p class="lead mb-4">Over 1,000 students are already using Campus Marketplace!</p>
                <a href="{% url 'accounts:register' %}" class="btn btn-light btn-lg px-5">
                    <i class="bi bi-person-plus"></i> Create Free Account
                </a>
                <p class="mt-3 mb-0">
                    <small>Already have an account? <a href="{% url 'accounts:login' %}" class="text-white fw-bold">Login here</a></small>
                </p>
            </div>
        </div>
    </div>
</div>
{% endif %}

<!-- If user is authenticated, show the features section -->
{% if user.is_authenticated %}
<!-- Features Section (same as before but for logged in users) -->
<div class="row mt-5 pt-5">
    <div class="col-md-3">
        <div class="text-center p-4">
            <div class="bg-primary text-white rounded-circle d-inline-flex align-items-center justify-content-center mb-3" style="width: 80px; height: 80px;">
                <i class="bi bi-cart fs-3"></i>
            </div>
            <h4>Buy & Sell</h4>
            <p>Textbooks, electronics, furniture - find great deals!</p>
        </div>
    </div>
    <div class="col-md-3">
        <div class="text-center p-4">
            <div class="bg-success text-white rounded-circle d-inline-flex align-items-center justify-content-center mb-3" style="width: 80px; height: 80px;">
                <i class="bi bi-binoculars fs-3"></i>
            </div>
            <h4>Lost & Found</h4>
            <p>Lost something? Found something? Reunite items with owners.</p>
        </div>
    </div>
    <div class="col-md-3">
        <div class="text-center p-4">
            <div class="bg-warning text-white rounded-circle d-inline-flex align-items-center justify-content-center mb-3" style="width: 80px; height: 80px;">
                <i class="bi bi-house fs-3"></i>
            </div>
            <h4>Housing</h4>
            <p>Find rooms, apartments, and houses near campus.</p>
        </div>
    </div>
    <div class="col-md-3">
        <div class="text-center p-4">
            <div class="bg-danger text-white rounded-circle d-inline-flex align-items-center justify-content-center mb-3" style="width: 80px; height: 80px;">
                <i class="bi bi-egg-fried fs-3"></i>
            </div>
            <h4>Food Deals</h4>
            <p>Special offers and discounts from campus restaurants.</p>
        </div>
    </div>
</div>
{% endif %}
{% endblock %}